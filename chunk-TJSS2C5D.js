import{a as F,b as G}from"./chunk-6TW723BN.js";import{b as u,d as A,e as D,f as d,g as N,h as k,p as M,s as R}from"./chunk-WGHNYQUM.js";import{b as E}from"./chunk-4U4QGEFV.js";import"./chunk-RCF4RAAF.js";import{g as y,i as C,j as L}from"./chunk-MZ4IBQOD.js";import{$a as b,Ea as g,Ja as h,La as s,Oa as v,T as n,Ta as e,Ua as t,Ub as _,Va as c,X as f,_a as S,a as p,ib as m,jb as x,mb as w,ya as a}from"./chunk-DSI57U6V.js";import"./chunk-EQDQRRRY.js";function T(i,j){if(i&1&&(e(0,"p",8),m(1),t()),i&2){let o=b();a(),x(o.error)}}var Y=(()=>{class i{form;isLoadingButton=g(!1);submitted=!1;error="";authenticationService=n(G);loginService=n(F);router=n(C);route=n(y);_alertService=n(E);loginSubscription=new p;handleLoginSubmit(){this.loginSubscription.add(this.loginService.onLogin(this.form.value).subscribe({next:o=>{o.status===200&&(this.isLoadingButton.set(!1),this.authenticationService.setAuth(o.body),this._alertService.handleSuccess("Login Successfull"),setTimeout(()=>{this.authenticationService.user()?.user_role.name==="admin"?this.router.navigate(["admin/"]):this.authenticationService.user()?.user_role.name==="owner"?this.router.navigate(["owner/"]):this.authenticationService.user()?.user_role.name==="customer"?this.router.navigate(["customer/"]):this.authenticationService.user()?.user_role.name==="manager"?this.router.navigate(["manager/"]):this.authenticationService.user()?.user_role.name==="technician"?this.router.navigate(["technician/"]):this.router.navigate(["home/"])},2e3))}}))}ngOnInit(){this.form=new D({email:new d("",[u.required,u.email]),password:new d("",u.required)})}static \u0275fac=function(l){return new(l||i)};static \u0275cmp=f({type:i,selectors:[["app-login"]],standalone:!0,features:[w],decls:17,vars:4,consts:[[1,"flex","h-screen"],[1,"w-full","max-w-xs","m-auto","bg-white","text-black","rounded-lg","shadow-md","p-5"],["src","images/jlc_logo.png",1,"w-20","mx-auto"],[3,"ngSubmit","formGroup"],[1,"mt-2","font-bold"],["controlName","email","label","Email","placeholder","Enter your email","type","email","autocomplete","email",3,"formGroup"],["controlName","password","label","Password","placeholder","Enter your password","type","password","autocomplete","password",3,"formGroup"],["type","submit",1,"w-full","my-2","mx-0","p-2","border-0","rounded-lg","text-sm","leading-6","font-medium","bg-emerald-600","text-white","hover:bg-emerald-500","hover:cursor-pointer"],[1,"text-red","my-2","text-sm","float-left","w-full"],["routerLink","/register",1,"text-emerald-700","hover:text-emerald-700","text-sm","float-left"],["routerLink","/register",1,"text-emerald-700","hover:text-emerald-700","text-sm","float-right"]],template:function(l,r){l&1&&(e(0,"div",0)(1,"div",1)(2,"header"),c(3,"img",2),t(),e(4,"form",3),S("ngSubmit",function(){return r.handleLoginSubmit()}),e(5,"p",4),m(6,"Sign in to your account"),t(),c(7,"app-form-field",5)(8,"app-form-field",6),e(9,"button",7),m(10," Sign in "),t(),h(11,T,2,1,"p",8),t(),e(12,"footer")(13,"a",9),m(14,"Forgot Password?"),t(),e(15,"a",10),m(16,"Create Account"),t()()()()),l&2&&(a(4),s("formGroup",r.form),a(3),s("formGroup",r.form),a(),s("formGroup",r.form),a(3),v(r.submitted&&r.error?11:-1))},dependencies:[_,M,N,A,k,L,R],encapsulation:2,changeDetection:0})}return i})();export{Y as LoginComponent};
