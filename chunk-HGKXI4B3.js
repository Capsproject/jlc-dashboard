import{a as i,b as g}from"./chunk-FWAAACPL.js";import{f as l}from"./chunk-7GBBFKJ2.js";import{a as c}from"./chunk-ZV7SFPXG.js";import{Fa as u,L as a,O as n,U as o,g as s}from"./chunk-O6BTFPW4.js";var m=(()=>{class t{getToken(){return window.localStorage[i.tokenName]}saveToken(e,r){window.localStorage[i.tokenName]=e,window.localStorage.user=r}destroyToken(){window.localStorage.removeItem(i.tokenName)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var k=(()=>{class t{currentUserSubject=new s(null);userDetails=new s({});userDetails$=this.userDetails.asObservable();userInfo;_isLoggedIn$=new s(!1);http=o(c);jwtService=o(m);router=o(l);_alertService=o(g);isLoggedIn$=this._isLoggedIn$.asObservable();user=u(null);get token(){return localStorage.getItem("user")||""}constructor(){this._isLoggedIn$.next(!!this.token),this.userInfo=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")||"{}"):{}}isLogIn(){return this.isLoggedIn$}userDetail(){return this.userDetails$}logout(){this.purgeAuth(),this.router.navigate(["/auth/login"])}get currenctUserValue(){return this.currentUserSubject.value}setAuth(e){this.jwtService.saveToken(e.token,e.user),localStorage.setItem("user",JSON.stringify(e.user)),this.user.set(e.user),this.userInfo=e.user,this.currentUserSubject.next(e.user),this._isLoggedIn$.next(!0)}purgeAuth(){this.jwtService.destroyToken(),this.currentUserSubject.next(null),localStorage.removeItem("user")}update(e){return this.http.put("/user",{user:e}).pipe(a(({user:r})=>{this.currentUserSubject.next(r)}))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();export{k as a};
