import{a as k}from"./chunk-HGKXI4B3.js";import{b as R}from"./chunk-KUJPDREA.js";import{b as u,d as A,e as D,f as p,g as I,h as N,n as M}from"./chunk-SV6MIWWK.js";import{a as G,b as j}from"./chunk-FWAAACPL.js";import{d as _,f as E,g as F}from"./chunk-7GBBFKJ2.js";import{a as L}from"./chunk-ZV7SFPXG.js";import{Fa as h,Ka as v,Ma as s,O as f,Pa as S,Tb as C,U as i,Ua as o,Va as r,Wa as c,Y as g,Za as b,_a as x,a as d,hb as l,ib as w,lb as y,za as m}from"./chunk-O6BTFPW4.js";import"./chunk-EQDQRRRY.js";var T=(()=>{class e{http=i(L);url=G.apiUrl;onLogin(t){return this.http.post(this.url+"auth/login",t,{observe:"response"})}static \u0275fac=function(n){return new(n||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function B(e,P){if(e&1&&(o(0,"p",8),l(1),r()),e&2){let t=x();m(),w(t.error)}}var ne=(()=>{class e{form;isLoadingButton=h(!1);submitted=!1;error="";authenticationService=i(k);loginService=i(T);router=i(E);route=i(_);_alertService=i(j);loginSubscription=new d;handleLoginSubmit(){this.loginSubscription.add(this.loginService.onLogin(this.form.value).subscribe({next:t=>{t.status===200&&(this.isLoadingButton.set(!1),this.authenticationService.setAuth(t.body),this._alertService.handleSuccess("Login Successfull"),setTimeout(()=>{this.authenticationService.user()?.user_role.name==="admin"?this.router.navigate(["admin/"]):this.authenticationService.user()?.user_role.name==="owner"?this.router.navigate(["owner/"]):this.authenticationService.user()?.user_role.name==="customer"?this.router.navigate(["customer/"]):this.authenticationService.user()?.user_role.name==="manager"?this.router.navigate(["manager/"]):this.authenticationService.user()?.user_role.name==="technician"?this.router.navigate(["technician/"]):this.router.navigate(["home/"])},2e3))}}))}ngOnInit(){this.form=new D({email:new p("",[u.required,u.email]),password:new p("",u.required)})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=g({type:e,selectors:[["app-login"]],standalone:!0,features:[y],decls:17,vars:4,consts:[[1,"flex","h-screen"],[1,"w-full","max-w-xs","m-auto","bg-white","text-black","rounded-lg","shadow-md","p-5"],["src","images/jlc_logo.png",1,"w-20","mx-auto"],[3,"ngSubmit","formGroup"],[1,"mt-2","font-bold"],["controlName","email","label","Email","placeholder","Enter your email","type","email","autocomplete","email",3,"formGroup"],["controlName","password","label","Password","placeholder","Enter your password","type","password","autocomplete","password",3,"formGroup"],["type","submit",1,"w-full","my-2","mx-0","p-2","border-0","rounded-lg","text-sm","leading-6","font-medium","bg-emerald-600","text-white","hover:bg-emerald-500","hover:cursor-pointer"],[1,"text-red","my-2","text-sm","float-left","w-full"],["routerLink","/register",1,"text-emerald-700","hover:text-emerald-700","text-sm","float-left"],["routerLink","/register",1,"text-emerald-700","hover:text-emerald-700","text-sm","float-right"]],template:function(n,a){n&1&&(o(0,"div",0)(1,"div",1)(2,"header"),c(3,"img",2),r(),o(4,"form",3),b("ngSubmit",function(){return a.handleLoginSubmit()}),o(5,"p",4),l(6,"Sign in to your account"),r(),c(7,"app-form-field",5)(8,"app-form-field",6),o(9,"button",7),l(10," Sign in "),r(),v(11,B,2,1,"p",8),r(),o(12,"footer")(13,"a",9),l(14,"Forgot Password?"),r(),o(15,"a",10),l(16,"Create Account"),r()()()()),n&2&&(m(4),s("formGroup",a.form),m(3),s("formGroup",a.form),m(),s("formGroup",a.form),m(3),S(a.submitted&&a.error?11:-1))},dependencies:[C,M,I,A,N,F,R],encapsulation:2,changeDetection:0})}return e})();export{ne as LoginComponent};
